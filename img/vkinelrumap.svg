<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="229.85072mm"
   height="148.50945mm"
   viewBox="0 0 526.34441 340.07775"
   version="1.1"
   id="svg20"
   sodipodi:docname="vkinelrumap.svg"
   inkscape:version="1.0.2 (e86c870879, 2021-01-15)">
  <defs
     id="defs13" />
  <title
     id="title214">Схема VKinel.ru</title>
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="3.9403334"
     inkscape:cx="370.9727"
     inkscape:cy="303.44443"
     inkscape:document-units="px"
     inkscape:current-layer="layer1"
     inkscape:document-rotation="0"
     showgrid="false"
     inkscape:window-width="1718"
     inkscape:window-height="1078"
     inkscape:window-x="200"
     inkscape:window-y="0"
     inkscape:window-maximized="0"
     fit-margin-top="0"
     fit-margin-left="0"
     fit-margin-right="0"
     fit-margin-bottom="0"
     lock-margins="true"
     scale-x="0.10001"
     viewbox-width="526"
     units="mm"
     inkscape:showpageshadow="false"
     showborder="false" />
  <metadata
     id="metadata17">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title>Схема VKinel.ru</dc:title>
        <dc:creator>
          <cc:Agent>
            <dc:title>VKinelru</dc:title>
          </cc:Agent>
        </dc:creator>
        <dc:rights>
          <cc:Agent>
            <dc:title>ВКинельРу</dc:title>
          </cc:Agent>
        </dc:rights>
        <dc:publisher>
          <cc:Agent>
            <dc:title>ВКинель.Ру</dc:title>
          </cc:Agent>
        </dc:publisher>
        <dc:identifier>ВКинельРу</dc:identifier>
        <dc:source>ВКинель.Ру</dc:source>
        <dc:date>2025</dc:date>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     style="display:inline">
    <image
       width="526.34442"
       height="340.07776"
       style="display:inline;opacity:1"
       xlink:href="https://vkinelru.github.io/3d/img/vkinelrumap3.jpg"
       id="jpegback"
       x="0"
       y="0"
       inkscape:svg-dpi="1"
       sodipodi:insensitive="true" />
    <image
       sodipodi:absref="/home/i/downloads/Telegram Desktop/2025-03-27-194151_1366x768_scrot.png"
       xlink:href="https://vkinelru.github.io/3d/img/kadastr-map-transparent.png"
       width="451.14398"
       height="253.64467"
       preserveAspectRatio="none"
       style="opacity:0.1;mix-blend-mode:difference;image-rendering:optimizeSpeed"
       id="image857"
       x="-20.170994"
       y="37.412521" />
    <path
       style="display:inline;fill:none;stroke:#000000;stroke-width:0.60588px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;opacity:1"
       d="M 0,0 V 340.07776 H 526.34442 V 0 Z"
       id="Граница_карты" />
    <path
       style="fill:none;stroke:#000000;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:6.00000001, 1;stroke-dashoffset:0;opacity:1"
       d="m 186.19334,57.124202 78.61034,50.195438 65.38822,88.50949 -114.08734,91.99046 -54.85271,-121.9305 -15.66258,-77.368856 z"
       id="Вся_территория_VKinelru" />
    <path
       style="fill:none;stroke:#ff0000;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;opacity:1"
       d="m 249.88543,179.21152 4.42204,4.99363 -3.51956,2.88804 7.44551,7.98735 2.71944,-2.03758 16.00038,20.25627 28.63753,-24.61152 -6.06922,-6.32694 8.28869,-6.66618 -10.10049,-10.98938 -5.89503,5.70641 0.57849,-2.75661 -4.19337,-4.29998 -4.08501,1.46291 1.70186,-4.75472 -3.99078,-3.80748 -3.81716,1.23999 -0.44921,-0.55266 z"
       id="Сингапур"
       sodipodi:nodetypes="ccccccccccccccccccc" />
    <path
       style="fill:none;stroke:#0000ff;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;opacity:1"
       d="m 174.91303,147.27108 24.71558,32.79895 20.17859,-15.25623 3.15623,4.27036 10.968,-8.37464 -3.25916,-4.02479 3.40037,-2.57075 -28.90773,-32.4968 z"
       id="Валенсия"
       sodipodi:nodetypes="ccccccccc" />
    <path
       style="fill:none;stroke:#ff0000;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;opacity:1"
       d="m 192.12308,106.96751 8.81985,10.5899 -24.60886,21.55709 -9.53405,-10.43606 z"
       id="Баня"
       sodipodi:nodetypes="ccccc" />
    <path
       style="fill:none;stroke:#00ff00;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;opacity:1"
       d="m 223.22738,100.04131 28.21693,24.89323 -4.94297,5.01077 4.55743,9.08198 -16.2386,14.45969 -31.4336,-36.01767 2.36743,-2.27898 -3.01349,-3.15875 5.15462,-4.49568 3.28021,3.17726 z"
       id="Ливерпуль"
       sodipodi:nodetypes="ccccccccccc" />
    <path
       style="fill:none;stroke:#ffff00;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;opacity:1"
       d="m 198.11786,195.18567 18.02818,28.17849 11.94232,-7.98444 -19.18249,-27.09498 z"
       id="Газифицированный_дом"
       sodipodi:nodetypes="ccccc" />
    <path
       style="opacity:1;fill:none;stroke:#f90000;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:6, 1;stroke-dashoffset:0;stroke-opacity:1"
       d="m 289.87652,139.04206 -52.19847,39.81536 6.96548,11.12748 -14.26943,11.60578 32.52986,50.6083 69.02798,-56.02775 z"
       id="Сингапур_территория"
       sodipodi:nodetypes="ccccccc" />
    <path
       style="opacity:1;fill:none;stroke:#00f900;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:3.63528, 0.60588;stroke-dashoffset:0;stroke-opacity:1"
       d="m 188.08031,56.369149 69.113,54.935561 12.51803,20.02807 -33.70798,23.37884 -32.61679,-37.24231 -1.31622,-2.86666 -1.202,-5.64635 -12.69744,-14.334745 -24.08619,-24.946694 z"
       id="Ливерпуль_территория"
       sodipodi:nodetypes="cccccccccc" />
    <path
       style="opacity:1;fill:none;stroke:#ffff00;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:6, 1;stroke-dashoffset:0;stroke-opacity:1"
       d="m 220.60804,201.2039 -10.7978,-15.47726 -12.04539,7.26401 -9.26918,5.8057 47.77525,73.81814 26.2706,-20.08919 -33.41333,-51.19861 14.18311,-11.57728 -6.76369,-11.44236 43.95144,-32.81981 -2.63095,-3.77013 -46.60586,35.07609 8.3441,12.14263 -13.28236,8.54998 z"
       id="Газифицированный_дом_территория"
       sodipodi:nodetypes="ccccccccccccccc" />
    <path
       style="opacity:1;fill:none;stroke:#ff0000;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:6, 1;stroke-dashoffset:0;stroke-opacity:1"
       d="m 138.16808,83.647941 2.47542,29.012589 17.77556,46.10339 43.87315,-37.01309 -2.9801,-12.33234 -13.07805,-15.570889 -23.22455,-23.613767 z"
       id="Баня_территория"
       sodipodi:nodetypes="cccccccc" />
    <path
       style="opacity:1;fill:none;stroke:#0000f8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:3.63528, 0.60588;stroke-dashoffset:0;stroke-opacity:1"
       d="m 158.59998,159.94705 45.84346,-39.17366 31.50319,35.23497 34.96535,-24.46341 6.68577,9.66264 -31.72869,23.47505 -8.2227,6.22632 -7.38758,5.77274 7.88739,11.77058 -17.24458,11.46854 -10.83934,-15.54242 -12.68628,7.43978 -9.41525,5.87103 -4.09918,-6.09195 -10.10977,7.10052 -13.94181,-32.45554 z"
       id="Валенсия_территория"
       sodipodi:nodetypes="ccccccccccccccccc" />
    <path
       style="fill:none;stroke:#000000;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0.27898872;stroke-width:0.60588001;stroke-miterlimit:4;stroke-dasharray:0.60588001, 4.84704005000000038;stroke-dashoffset:0;opacity:1"
       d="m 126.48162,312.21454 -105.845754,-0.0339 0.02417,-105.8097 105.717544,0.0249 z"
       id="Kvadrat" />
    <path
       style="fill:none;stroke:#00ffff;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;opacity:0.75"
       d="m 188.28854,55.774707 -50.3883,27.777225 2.19938,29.456828 33.81241,85.12381 96.10976,-66.60614 -12.52171,-20.59901 z"
       id="63_03_0202001_589" />
    <path
       style="fill:none;stroke:#00ffff;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;opacity:0.75"
       d="m 183.995,191.21082 52.46003,79.83629 81.40688,-68.68619 -47.84012,-70.83449 z"
       id="63_03_0202001_588"
       sodipodi:nodetypes="ccccc" />
  </g>
  <style
     type="text/css"
     id="style"><![CDATA[
svg {
width:100%;
height:100%;
margin: 0 !important;
padding: 0 !important;
border: 0 !important;
}


path {
    transition: stroke 0.1s ease;
    stroke-width: 1.0px !important;
    stroke: black;
}

path:hover {
    stroke-width: 3px;
    animation: pulseColor 1.4s infinite;
}

@keyframes pulseColor {
    000% { stroke: #000; fill:#F002; }
    050% { stroke: #F00; fill:#0002; }
    100% { stroke: #000; fill:#F002; }
}

text {
    pointer-events: none; /* Предотвращает взаимодействие с текстом при вращении */
}

.textfade {
    animation: fadeOutText 13s ease forwards;
}

@keyframes fadeOutText {
    0% {
        opacity: 1;
    }
    80% { 
        opacity: 0.85;
        filter: blur(0px);
    }
    100% {
        opacity: 0;
        filter: blur(6px);
    }
}
]]></style>
  <script
     id="vkinelrujs"><![CDATA[
    
document.addEventListener('keydown', function(event) {
    const svgRoot = document.documentElement;
    let currentRotation = parseFloat(svgRoot.getAttribute('data-rotation') || '0');
    
    if (event.key === 'a' || event.key === 'A') {
        currentRotation -= 0.5; // Поворот влево
    } else if (event.key === 'd' || event.key === 'D') {
        currentRotation += 0.5; // Поворот вправо
    }
    
    svgRoot.setAttribute('data-rotation', currentRotation);
    svgRoot.style.transform = `rotate(${currentRotation}deg)`;
});

    // Получаем корневой SVG элемент
    const svgRoot = document.documentElement;
    const originalTitle = svgRoot.getAttribute('title') || 'Vkinel.ru';
    
    // Находим все path элементы
    const paths = svgRoot.querySelectorAll('path');

    paths.forEach(path => {
        // Обработчик наведения
        path.addEventListener('mouseover', function() {
            const pathId = this.getAttribute('id') || '(без id)';
            svgRoot.setAttribute('title', pathId);
            document.title = pathId;
        });

        path.addEventListener('mouseout', function() {
            svgRoot.setAttribute('title', originalTitle);
            document.title = originalTitle;
        });

        // Обработчик клика
        path.addEventListener("click", function (event) {
            const pathId = path.id || "(без id)";
            const length = path.getTotalLength();
            let points = [];

            for (let i = 0; i <= length; i += 1) {
                const { x, y } = path.getPointAtLength(i);
                points.push({ x, y });
            }

            if (points.length < 3) {
                alert(`Path ID: ${pathId}\nНе хватает точек для вычисления площади`);
                return;
            }

            console.log(`ID: ${pathId}`);
            console.log(`Количество точек: ${points.length}`);

            let area = 0;
            for (let i = 0; i < points.length - 1; i++) {
                area += (points[i].x * points[i + 1].y) - (points[i + 1].x * points[i].y);
            }
            area = Math.abs(area) / 2;
            area = area / 5.24382628733;

            console.log(`Площадь: ${area.toFixed(2)} м²`);

            // Создаем текстовый элемент
            const svgNS = "http://www.w3.org/2000/svg";
            const text = document.createElementNS(svgNS, "text");

            // Получаем оригинальный цвет stroke из атрибута style
            const style = path.getAttribute('style');
            let pathColor = '#000000'; // Цвет по умолчанию, если stroke не найден
            if (style) {
                const strokeMatch = style.match(/stroke:#[0-9A-Fa-f]{6}/) || style.match(/stroke:#[0-9A-Fa-f]{3}/);
                if (strokeMatch) {
                    pathColor = strokeMatch[0].replace('stroke:', '');
                }
            }
            text.setAttribute("fill", pathColor); // Устанавливаем оригинальный цвет
            text.setAttribute("stroke", "#999D");        // Цвет обводки
            text.setAttribute("stroke-width", "1.5");      // Толщина обводки
            text.setAttribute("paint-order", "stroke");  // Обводка рисуется под заливкой            
            text.setAttribute("class", "textfade");        // Цвет обводки

            // Корректируем координаты клика
            const point = svgRoot.createSVGPoint();
            point.x = event.clientX;
            point.y = event.clientY;
            const ctm = svgRoot.getScreenCTM();
            const svgPoint = point.matrixTransform(ctm.inverse());

            text.setAttribute("x", svgPoint.x);
            text.setAttribute("y", svgPoint.y);
            text.setAttribute("font-size", "8");
            text.textContent = `${pathId}: ${area.toFixed(2)} м²`;

            // Добавляем текст в SVG
            svgRoot.appendChild(text);

            // Удаляем текст через 13 секунд
            setTimeout(() => {
                svgRoot.removeChild(text);
            }, 13000);

            // Оставляем старую анимацию линий
            const svg = document.createElementNS(svgNS, "svg");
            const parentSvg = path.ownerSVGElement;
            svg.setAttribute("width", parentSvg.getAttribute("width"));
            svg.setAttribute("height", parentSvg.getAttribute("height"));
            svg.style.position = "absolute";
            svg.style.top = "0";
            svg.style.left = "0";
            svg.style.pointerEvents = "none";
            parentSvg.appendChild(svg);

            const line = document.createElementNS(svgNS, "line");
            line.setAttribute("stroke-width", "7");
            svg.appendChild(line);

            function getRandomColor() {
                const letters = "0123456789ABCDEF";
                let color = "#";
                for (let i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }

            function drawLine() {
                let i = 0;
                function moveLine() {
                    if (i < points.length) {
                        line.setAttribute("x1", points[i].x);
                        line.setAttribute("y1", points[i].y);
                        line.setAttribute("x2", i === points.length - 1 ? points[0].x : points[i + 1].x);
                        line.setAttribute("y2", i === points.length - 1 ? points[0].y : points[i + 1].y);
                        line.setAttribute("stroke", getRandomColor());
                        i++;
                        setTimeout(moveLine, 13);
                    } else {
                        setTimeout(() => {
                            parentSvg.removeChild(svg);
                        }, 100);
                    }
                }
                moveLine();
            }

            drawLine();
        });
    });
    
    
]]></script>
</svg>
